---
name: "Cultivation System Core"
status: open
created: 2025-09-18T03:19:05Z
updated: 2025-09-18T03:32:20Z
github: https://github.com/collrest-a11y/idle-cultivation-game/issues/5
depends_on: [2, 3]
parallel: true
conflicts_with: []
---

# Cultivation System Core

## Description

Implement the core cultivation mechanics that form the heart of the idle cultivation game. This includes dual cultivation paths (Qi and Body), realm progression system, breakthrough mechanics, and sophisticated offline calculation system. The cultivation system must provide meaningful progression that continues even when the player is away from the game.

## Acceptance Criteria

- [ ] Dual cultivation paths: Qi Cultivation and Body Cultivation with independent progression
- [ ] Comprehensive realm system with multiple major realms and sub-stages
- [ ] Breakthrough mechanics with success/failure rates and resource requirements
- [ ] Offline calculation system for continuous progression during player absence
- [ ] Cultivation speed modifiers based on techniques, items, and environmental factors
- [ ] Resource consumption mechanics (Spiritual Qi, pills, spiritual stones)
- [ ] Cultivation bottlenecks and plateau mechanics for balanced progression
- [ ] Achievement and milestone tracking for cultivation progress
- [ ] Save/load system integration for cultivation state persistence

## Technical Details

### Cultivation Paths Architecture
- Base `CultivationPath` class with Qi and Body implementations
- Independent progression tracking with cross-path synergy bonuses
- Configurable cultivation speed formulas with diminishing returns
- Resource efficiency calculations based on realm and techniques

### Realm System Implementation
- Hierarchical realm structure: Major Realms > Minor Stages > Sub-levels
- Breakthrough requirement validation and success probability
- Realm-specific benefits: stat multipliers, unlock conditions, new abilities
- Progression curve balancing with exponential scaling factors

### Offline Calculation Engine
- Time-based progression simulation with configurable tick resolution
- Resource consumption validation during offline periods
- Breakthrough attempt simulation with success/failure tracking
- Plateau detection and automatic cultivation path optimization
- Performance optimization for extended offline periods (days/weeks)

### Progression Balance System
- Cultivation speed formulas with talent, technique, and resource modifiers
- Bottleneck mechanics preventing overly rapid advancement
- Cross-realm comparison utilities for balance testing
- Dynamic difficulty adjustment based on player progression patterns

## Dependencies

- **2 - Core Game Engine**: Requires GameState, event system, and time management
- **3 - Save/Load System**: Essential for cultivation progress persistence

## Effort Estimate

**Size: L (3-4 days)**

- Day 1: Core cultivation path classes and realm system architecture
- Day 2: Breakthrough mechanics and progression calculations
- Day 3: Offline calculation engine and resource management
- Day 4: Balance testing, optimization, and integration with save system

## Definition of Done

- [ ] Both Qi and Body cultivation paths fully implemented with independent progression
- [ ] Complete realm system with at least 10 major realms and 100+ total stages
- [ ] Offline calculation system handles extended periods (up to 30 days) efficiently
- [ ] Breakthrough system with realistic success rates and meaningful consequences
- [ ] Resource consumption properly validated and tracked
- [ ] Cultivation progress integrates seamlessly with save/load system
- [ ] Performance benchmarks meet requirements for long-running calculations
- [ ] Comprehensive unit tests covering all cultivation scenarios
- [ ] Balance testing confirms progression curve feels rewarding but not trivial
- [ ] Integration tests with core game engine demonstrate proper event handling
- [ ] Documentation includes cultivation formulas and balance considerations
